# 本地开发指南

## 问题说明

您提出的问题很有道理！原始的应用确实完全依赖阿里云服务，包括：
- 阿里云对象存储 OSS（存储图片文件）
- 阿里云表格存储 OTS（存储用户数据和文件元数据）
- 阿里云函数计算 FC（云端部署）

这些服务在本地环境中无法直接使用，所以我为您创建了一个**本地开发版本**。

## 本地开发模式

### 启动方式

```bash
python local_dev.py
```

### 功能特点

✅ **完全本地运行** - 不需要任何阿里云服务
✅ **用户认证系统** - 注册、登录、登出功能
✅ **模拟数据** - 预置了示例鸟类检测数据
✅ **完整UI** - 包含所有前端页面
✅ **API接口** - 文件列表、搜索等功能

### 与云端版本的区别

| 功能 | 云端版本 | 本地开发版本 |
|------|----------|-------------|
| 用户数据存储 | 阿里云OTS | 内存存储 |
| 文件存储 | 阿里云OSS | 模拟数据 |
| 图片上传 | 真实上传到OSS | 暂不支持 |
| 鸟类检测 | YOLO模型检测 | 使用示例数据 |
| 数据持久化 | 永久存储 | 重启后丢失 |

## 使用说明

### 1. 访问应用

启动后访问：http://127.0.0.1:9000

### 2. 用户注册

- 点击"注册"按钮
- 输入任意用户名和密码
- 注册成功后会跳转到登录页面

### 3. 登录使用

- 使用注册的用户名和密码登录
- 登录后可以看到示例的鸟类检测数据
- 可以使用搜索功能查找特定鸟类

### 4. 示例数据

应用预置了以下示例数据：
- `sample_bird1.jpg` - 检测到：麻雀(2只)、燕子(1只)
- `sample_bird2.jpg` - 检测到：鸽子(3只)、乌鸦(1只)

## 完整功能开发

如果您需要完整的功能（包括真实的图片上传和鸟类检测），有两种选择：

### 选择1：配置阿里云服务

1. 注册阿里云账号
2. 开通OSS、OTS等服务
3. 配置`secret.env`文件中的真实凭证
4. 运行`python app.py`

### 选择2：使用本地存储

可以修改代码使用本地文件系统替代云存储：
- 图片存储：保存到本地`uploads/`目录
- 用户数据：使用SQLite数据库
- 检测模型：下载YOLO模型到本地

## 技术架构

```
本地开发版本架构：
┌─────────────────┐
│   Flask Web App │
├─────────────────┤
│ • 用户认证       │
│ • 路由处理       │
│ • 模板渲染       │
└─────────────────┘
         │
┌─────────────────┐
│   内存存储       │
├─────────────────┤
│ • 用户数据       │
│ • 文件元数据     │
│ • 示例数据       │
└─────────────────┘
```

## 总结

您的担心是对的 - 原始应用确实需要云服务才能运行。但现在您有了：

1. **本地开发版本** (`local_dev.py`) - 立即可用，无需云服务
2. **云端部署版本** (`app.py`) - 需要配置阿里云服务

这样您可以先在本地开发和测试功能，确认满意后再考虑部署到云端。